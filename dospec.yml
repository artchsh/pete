alerts:
- rule: DEPLOYMENT_FAILED
- rule: DOMAIN_FAILED
domains:
- domain: pete.kz
  type: PRIMARY
  zone: pete.kz
features:
- buildpack-stack=ubuntu-22
ingress:
  rules:
  - component:
      name: pete-api
    match:
      path:
        prefix: /api
  - component:
      name: pete
    match:
      path:
        prefix: /
name: pete
region: blr
services:
- build_command: npm run build
  environment_slug: node-js
  envs:
  - key: MONGO_URI
    scope: RUN_AND_BUILD_TIME
    value: mongodb+srv://digitalocean:C3M32rJ1OrFub2mZ@production-1.dubexxm.mongodb.net/
  - key: DB_NAME
    scope: RUN_AND_BUILD_TIME
    value: pete
  - key: SECRET
    scope: RUN_AND_BUILD_TIME
    value: Yylqo5SUltC+ckKoDVoy/g+8iFR0+x2LEDf2BN2Fo4s=
  - key: ACCESS_KEY_ID
    scope: RUN_AND_BUILD_TIME
    value: DO004HU86UARQNBA8U8D
  - key: SECRET_ACCESS_KEY
    scope: RUN_AND_BUILD_TIME
    value: LwbUqH3Cao1H2e9lZGEW7X9bto+6W/F5HqazjKmnk4w
  - key: AWS_ENDPOINT
    scope: RUN_AND_BUILD_TIME
    value: https://blr1.digitaloceanspaces.com
  - key: BUCKET_NAME
    scope: RUN_AND_BUILD_TIME
    value: pete
  - key: BUCKET_DOMAIN
    scope: RUN_AND_BUILD_TIME
    value: https://spaces.pete.kz
  github:
    branch: main
    repo: artchsh/pete-api
  http_port: 8080
  instance_count: 1
  instance_size_slug: professional-xs
  name: pete-api
  run_command: npm start
  source_dir: /
static_sites:
- build_command: yarn build
  environment_slug: node-js
  github:
    branch: main
    repo: artchsh/pete
  name: pete
  catchall_document: index.html
  source_dir: /